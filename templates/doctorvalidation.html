<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Verification | Document Upload</title>
    <link rel="stylesheet" href="..\static\doctorvalidation.css">
</head>
<body>

    <form class="form-card" id="verificationForm" action="{{ url_for('routes.doctorvalidation') }}" method="POST" enctype="multipart/form-data" novalidate>
        <h2>Validation Section</h2>
        <p class="subtitle">Upload high-resolution documents for identity and license verification.</p>

        <div class="section">
            <h3>Identity Verification</h3>
            
            <div class="form-group file-group">
                <input type="file" name="doctor_photo" id="doctor_photo" accept="*/*" required>
                <label for="doctor_photo" class="fixed-label">Professional Photo *</label>
                <small class="error">Professional photo is required</small>
            </div>
        </div>
        
        <div class="section">
            <h3>Professional License</h3>

            <div class="form-group">
                <input type="text" name="nmc_number" id="nmc_number" required>
                <label for="nmc_number">NMC Registration Number*</label>
                <small class="error">Enter a valid alphanumeric license number</small>
            </div>
            
            <!-- <div class="form-group file-group">
                <input type="file" name="nmc_license" id="nmc_license" accept="*/*" required>
                <label for="nmc_license" class="fixed-label">NMC License Photo*</label>
                <small class="error">License photo is required</small>
            </div> -->
        </div>


        <!-- add reference here -->
       <button type="submit" style="text-decoration: none;color: white;">Submit Personal Details</button>

        </div>
       <div class="subtitle" style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 5px;">
    <span style="color: grey;">Already have an account?</span>

    <!-- add reference here -->
    <a href="{{ url_for('routes.doctorlogin') }}" style="color: #3182ce; text-decoration: none; font-weight: bold;">Login here</a>
</div>
    </form>

   <script>
const form = document.getElementById('verificationForm');
const inputs = document.querySelectorAll('input');

// Floating label for text inputs
inputs.forEach(input => {
    if (input.type !== 'file') {
        input.addEventListener('input', () => {
            input.value !== '' ? input.classList.add('not-empty') : input.classList.remove('not-empty');
        });
    }
});

form.addEventListener('submit', (e) => {
    let isValidForm = true;
    const nmcPattern = /^[a-zA-Z0-9\/\-]+$/;

    inputs.forEach(input => {
        const errorMsg = input.parentElement.querySelector('.error');
        let isValid = true;

        if (!input.value.trim()) {
            isValid = false;
            errorMsg.textContent = "This field is required";
        } else if (input.name === 'nmc_number' && !nmcPattern.test(input.value)) {
            isValid = false;
            errorMsg.textContent = "Use letters, numbers, / or - only";
        }

        if (!isValid) {
            isValidForm = false;
            input.classList.add('invalid');
            errorMsg.style.display = 'block';
        } else {
            input.classList.remove('invalid');
            errorMsg.style.display = 'none';
        }
    });

    if (!isValidForm) {
        // Prevent submission only if invalid
        e.preventDefault();
    }
    // If valid â†’ do nothing, let Flask handle the POST and redirect
});
</script>
</body>
</html>



